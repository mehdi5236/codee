<!DOCTYPE html>
<html>
<head>
  <title>Forex Checklist Analyzer</title>
  <style>
:root {
  --main-font: 'Roboto', sans-serif;
  --gradient-color-start: #1A2634;
  --gradient-color-middle: #323C4F;
  --gradient-color-end: #424D5C;
  --gradient-color-extra1: #3B4861;
  --gradient-color-extra2: #4F5D75;
  --container-background: rgba(28, 33, 42, 0.9);
  --item-background: #222;
  --button-color-start: #B38184;
  --button-color-end: #D8A7A1;
  --text-color: #F2F2F2;
  --checkbox-color: #4CAF50;
  --checkbox-color-unchecked: #ffffff;
  --input-background: rgba(255, 255, 255, 0.1);
  --input-border-color: #555;
}

/* HTML and Body Styling */
html {
  height: 100%;
  background: linear-gradient(to bottom, var(--gradient-color-start), var(--gradient-color-middle), var(--gradient-color-end), var(--gradient-color-extra1), var(--gradient-color-extra2));
  background-attachment: fixed;
}

body {
  position: relative;
  font-family: var(--main-font);
  color: var(--text-color);
  background: transparent;
  min-height: 100%;
  display: flex;
  justify-content: flex-end;
  align-items: center;
}

/* Container Styles */
.container {
  flex: 1 0 200px;
  max-width: 600px;
  margin: 0 10px;
  background: var(--container-background);
  border-radius: 15px;
  backdrop-filter: blur(10px);
  padding: 50px;
  box-shadow: 10px 10px 10px rgba(0, 0, 0, 0.2), -10px -10px 10px rgba(0, 0, 0, 0.2), inset 2px 2px 5px rgba(0, 0, 0, 0.1);
  border: 1px solid #555;
}

/* Section Specific Styles */
.container#section1 {
  order: 2;
}

.container#section2 {
  animation: slideInFromLeft 1s forwards;
  order: 1;
}

@keyframes slideInFromLeft {
  0% {
    transform: translateX(-100%);
    opacity: 0;
  }
  100% {
    transform: translateX(0);
    opacity: 1;
  }
}              


next_part_improved_code = """
/* Item Styles */
.container div[id^="item-"] {
  background: var(--item-background);
  padding: 25px;
  border-radius: 10px;
  margin-bottom: 15px;
  box-shadow: 5px 5px 10px rgba(0, 0, 0, 0.1), -5px -5px 10px rgba(0, 0, 0, 0.2);
  border: 1px solid #555;
  transition: 0.3s ease-in-out;
}

/* Checkbox Styles */
.container div[id^="item-"] input[type='checkbox'] {
  width: 20px;
  height: 20px;
  appearance: none;
  border: 2px solid var(--checkbox-color-unchecked);
  border-radius: 4px;
  outline: none;
  transition-duration: 0.3s;
}

.container div[id^="item-"] input[type='checkbox']:checked {
  background: var(--checkbox-color);
  border: 2px solid var(--checkbox-color);
  animation: checkmark 0.3s forwards;
}

@keyframes checkmark {
  0% {
    background: var(--checkbox-color-unchecked);
    border: 2px solid var(--checkbox-color);
  }
  100% {
    background: var(--checkbox-color);
    border: 2px solid var(--checkbox-color);
  }
}


input[type='text'] {
  padding: 10px;
  border: 1px solid var(--input-border-color);
  background-color: var(--input-background);
  border-radius: 4px;
  width: 100%;
  margin-bottom: 20px;
  transition: all 0.3s ease-in-out;
}

input[type='text']:focus {
  background-color: rgba(255, 255, 255, 0.2);
}

/* Button Styles */
.container div[id^="item-"] button {
  margin-left: 10px;
  cursor: pointer;
  color: white;
  background: linear-gradient(to right, var(--button-color-start), var(--button-color-end));
  padding: 10px;
  border-radius: 5px;
  border: none;
  box-shadow: 0px 10px 10px rgba(0, 0, 0, 0.1);
  transition: all 0.3s ease;
}

.container div[id^="item-"] button:hover {
  box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.3);
  transform: scale(1.05);
}

.container div[id^="item-"] button:active {
  box-shadow: none;
  transform: scale(0.95);
}

/* Heading Styles */
.container h1 {
  text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
  margin-bottom: 30px;
}

.button-container {
  display: flex;
  justify-content: space-between;
  margin-top: 30px;
  transition: 0.3s ease-in-out;
}

.button-container button {
  flex: 1;
  margin: 0 10px;
  box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
  transition: all 0.3s ease;
  border-radius: 10px;
}

.button-container button:hover {
  box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.3);
  transform: scale(1.05);
}

.button-container button:active {
  box-shadow: none;
  transform: scale(0.95);
}

/* Enlarge Styles */
.enlarge {
  transition: all 0.5s ease;
  width: 500px;
  height: 500px;
  z-index: 1000;
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
}

/* Overlay Styles */
.overlay {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  z-index: 999;
  background: rgba(0, 0, 0, 0.5);
}

/* Image Upload Button Styles */
.image-upload-button {
  display: inline-block;
  margin-left: 10px;
  cursor: pointer;
  color: white;
  background: linear-gradient(to right, var(--button-color-start), var(--button-color-end));
  padding: 10px;
  border-radius: 5px;
  border: none;
  box-shadow: 0px 10px 10px rgba(0, 0, 0, 0.1);
  transition: all 0.3s ease;
}

.image-upload-button:hover {
  box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.3);
  transform: scale(1.05);
}

.image-upload-button:active {
  box-shadow: none;
  transform: scale(0.95);
}

.image-upload-button input[type="file"] {
  display: none;
}

/* Priority Slider Styles */
.priority-slider {
  height: 10px;
  background-color: #ccc;
  border-radius: 5px;
  position: relative;
  margin: 10px 0;
}

.priority-slider .percentage-label {
  text-align: center;
  font-size: 1.2em;
  margin-top: 5px;
  color: var(--text-color);
}

.priority-slider:before {
  content: "";
  position: absolute;
  height: 100%;
  background: linear-gradient(to right, #B38184, #4CAF50);
  border-radius: 5px;
  width: 0%;
}

  </style>
  <script>
    var checklistDataSection1 = [
      { name: 'Criterion 1', priority: 30, active: true, image: null }, 
      { name: 'Criterion 2', priority: 15, active: true, image: null },
      { name: 'Criterion 3', priority: 20, active: false, image: null }
    ];
var checklistDataSection2 = [
  { name: 'Criterion 4', priority: 25, active: false, image: null }, 
  { name: 'Criterion 5', priority: 10, active: false, image: null }
];

window.onload = function() {
  if (localStorage.getItem('checklistDataSection1')) {
    checklistDataSection1 = JSON.parse(localStorage.getItem('checklistDataSection1'));
  }
  if (localStorage.getItem('checklistDataSection2')) {
    checklistDataSection2 = JSON.parse(localStorage.getItem('checklistDataSection2'));
  }

  renderChecklist('1', checklistDataSection1);
  renderChecklist('2', checklistDataSection2);

  document.getElementById('section2').style.display = 'none';
}

function renderChecklist(section, checklistData) {
  document.getElementById('checklistContainerSection' + section).innerHTML = '';

  checklistData.forEach(function(data, index) {
    var item = createChecklistItem(data.name, data.priority, data.active, index, section, data.image);
    document.getElementById('checklistContainerSection' + section).appendChild(item);
  });
  updateScore(section);
}

function createChecklistItem(name, priority, active, index, section, image) {
  var item = document.createElement('div');
  item.id = 'item-' + section + '-' + index;
  item.style.display = 'flex';
  item.style.flexDirection = 'row';
  item.style.alignItems = 'center';

  var checkbox = document.createElement('input');
  checkbox.type = 'checkbox';
  checkbox.name = name; 
  checkbox.value = priority;
  checkbox.id = name + '-' + section;
  checkbox.className = 'checklist-item-section' + section;
  checkbox.checked = active;
  checkbox.onchange = function() {
    toggleActive(index, section);
    updateScore(section);
  };

  var label = document.createElement('label');
  label.htmlFor = name + '-' + section;
  label.appendChild(document.createTextNode(name + ' (Priority: ' + priority + ')'));

  var editButton = document.createElement('button');
  editButton.textContent = 'Edit';
  editButton.onclick = function() {
    editCriteria(index, section);
  };

  var deleteButton = document.createElement('button');
  deleteButton.textContent = 'Delete';
  deleteButton.onclick = function() {
    deleteCriteria(index, section);
  };

  var imageInput = document.createElement('input');
  imageInput.type = 'file';
  imageInput.accept = 'image/*';
  imageInput.multiple = true;
  imageInput.onchange = function(e) {
    var file = e.target.files[0];
    var reader = new FileReader();
    reader.onloadend = function() {
      var base64String = reader.result;
      var checklistData = section === '1' ? checklistDataSection1 : checklistDataSection2;
      checklistData[index].image = base64String;
      localStorage.setItem('checklistDataSection' + section, JSON.stringify(checklistData));
      renderChecklist(section, checklistData);
    };
    reader.readAsDataURL(file);
  };

  var imageUploadButton = document.createElement('label');
  imageUploadButton.className = 'image-upload-button';
  imageUploadButton.textContent = 'Upload Image';
  imageUploadButton.appendChild(imageInput);

  item.appendChild(checkbox);
  item.appendChild(label);
  item.appendChild(editButton);
  item.appendChild(deleteButton);

  if (image) {
    var img = document.createElement('img');
    img.src = image;
    img.style.width = '50px'; // Adjust as needed
    img.style.height = '50px'; // Adjust as needed
    img.onclick = enlargeImage;
    item.appendChild(img);
  }

  item.appendChild(imageUploadButton);

  return item;
}

function updateScore(section) {
  var checkboxes = document.getElementsByClassName('checklist-item-section' + section);
  var score = 0;
  Array.prototype.forEach.call(checkboxes, function(checkbox) {
    if (checkbox.checked) {
      score += parseInt(checkbox.value, 10); 
    }
  });
  var slider = document.getElementById('scoreSliderSection' + section).children[0];
  slider.style.width = (score / (checklistDataSection1.length * 100) * 100) + '%';

  if (section === '1') {
    var allChecked = Array.prototype.every.call(checkboxes, function(checkbox) {
      return checkbox.checked;
    });

    if(allChecked){
      document.getElementById('section2').style.display = 'block';
    } else {
      document.getElementById('section2').style.display = 'none';
    }

    document.getElementById('section1').querySelector('.button-container').appendChild(document.getElementById('saveButton'));
  }
  // Update the slider based on checked items' cumulative priority
var sliderPercentage = section === '1' 
    ? (checklistDataSection1.reduce((acc, cur) => acc + (cur.active ? cur.priority : 0), 0) / 100) * 100 
    : (checklistDataSection2.reduce((acc, cur) => acc + (cur.active ? cur.priority : 0), 0) / 100) * 100;

document.getElementById('prioritySliderSection' + section).style.width = sliderPercentage + "%";
var percentageLabel = document.getElementById('percentageLabelSection' + section);
var colorPercentage = sliderPercentage / 100;
document.getElementById('prioritySliderSection' + section + ' div:before').style.background = `linear-gradient(to right, #B38184 ${colorPercentage * 100}%, #4CAF50 ${colorPercentage * 100}%)`;
percentageLabel.textContent = sliderPercentage.toFixed(2) + '%';

}

function toggleActive(index, section) {
  var checklistData = section === '1' ? checklistDataSection1 : checklistDataSection2;
  checklistData[index].active = !checklistData[index].active;
  saveData();
}

function addCriteria(section) {
  var name = prompt("Enter the criteria name:");
  var priority = parseInt(prompt("Enter the criteria priority:"), 10);
  if (name && !isNaN(priority)) {
    var data = {name: name, priority: priority, active: true, image: null};
    var checklistData = section === '1' ? checklistDataSection1 : checklistDataSection2;
    checklistData.push(data);
    renderChecklist(section, checklistData);
  } else {
    alert('Invalid input. Please enter a valid name and priority.');
  }
  saveData();
}

function editCriteria(index, section) {
  var newName = prompt("Enter the new criteria name:");
  var newPriority = parseInt(prompt("Enter the new criteria priority:"), 10);
  if (newName && !isNaN(newPriority)) {
    var checklistData = section === '1' ? checklistDataSection1 : checklistDataSection2;
    checklistData[index].name = newName;
    checklistData[index].priority = newPriority;
    renderChecklist(section, checklistData);
  } else {
    alert('Invalid input. Please enter a valid name and priority.');
  }
  saveData();
}

function deleteCriteria(index, section) {
  var checklistData = section === '1' ? checklistDataSection1 : checklistDataSection2;
  checklistData.splice(index, 1);
  renderChecklist(section, checklistData);
  saveData();
}

function searchCriteria(section) {
  var query = document.getElementById('searchBoxSection' + section).value.toLowerCase();
  var checklistData = section === '1' ? checklistDataSection1 : checklistDataSection2;
  checklistData.forEach(function(data, index) {
    var item = document.getElementById('item-' + section + '-' + index);
    if (data.name.toLowerCase().includes(query)) {
      item.style.display = 'block';
    } else {
      item.style.display = 'none';
    }
  });
}

function saveData() {
  localStorage.setItem('checklistDataSection1', JSON.stringify(checklistDataSection1));
  localStorage.setItem('checklistDataSection2', JSON.stringify(checklistDataSection2));
}

function enlargeImage(e) {
  e.target.classList.add('enlarge');
  var overlay = document.createElement('div');
  overlay.classList.add('overlay');
  overlay.onclick = shrinkImage;
  document.body.appendChild(overlay);
}

function shrinkImage() {
  var image = document.querySelector('.enlarge');
  if (image) {
    image.classList.remove('enlarge');
  }
  var overlay = document.querySelector('.overlay');
  if (overlay) {
    overlay.remove();
  }
}
  </script>
</head>
<body>
  <div class="container" id="section1">
    <h1>Essential Criteria</h1>
    <div id="prioritySliderSection1" class="priority-slider"></div>
    <input type="text" id="searchBoxSection1" placeholder="Search criteria..." oninput="searchCriteria('1')" style="width: 100%; padding: 10px; margin-bottom: 20px; background-color: rgba(255, 255, 255, 0.1); border: none;">
    <div id="checklistContainerSection1"></div>
    <div class="button-container">
      <button onclick="addCriteria('1')" style="padding: 10px 20px; border: none; background-color: #4CAF50; color: #fff; border-radius: 5px; cursor: pointer;">Add Criteria</button>
      <button id="saveButton" onclick="saveData()" style="padding: 10px 20px; border: none; background-color: #4CAF50; color: #fff; border-radius: 5px; cursor: pointer;">Save Changes</button>
    </div>
    <div id="scoreSliderSection1"><div></div></div>
  </div>
  <div class="container" id="section2">
    <h1>Additional Criteria</h1>
    <div id="prioritySliderSection2" class="priority-slider"></div>
    <input type="text" id="searchBoxSection2" placeholder="Search criteria..." oninput="searchCriteria('2')" style="width: 100%; padding: 10px; margin-bottom: 20px; background-color: rgba(255, 255, 255, 0.1); border: none;">
    <div id="checklistContainerSection2"></div>
    <div class="button-container">
      <button onclick="addCriteria('2')" style="padding: 10px 20px; border: none; background-color: #4CAF50; color: #fff; border-radius: 5px; cursor: pointer;">Add Criteria</button>
    </div>
    <div id="scoreSliderSection2"><div></div></div>
  </div>
</body>
</html>
